ALTER SESSION SET "_oracle_script" = TRUE;

CREATE user CINEMA_USER IDENTIFIED BY admin;

alter session set current_schema = CINEMA_USER;

GRANT CONNECT TO CINEMA_USER;
GRANT CREATE TABLE TO CINEMA_USER;
GRANT CREATE SEQUENCE TO CINEMA_USER;
GRANT CREATE TRIGGER TO CINEMA_USER;

ALTER USER CINEMA_USER QUOTA UNLIMITED ON USERS;

CREATE TABLE ATTORI(
    CodAttore INTEGER generated by default as identity(start with 1) not null,
    Nome VARCHAR2(50) NOT NULL,
    AnnoNascita INTEGER,
    Nazionalita VARCHAR2(50),
    PRIMARY KEY(CodAttore));

CREATE TABLE FILM(
   CodFilm INTEGER generated by default as identity(start with 1) not null,
   Titolo VARCHAR2(50) NOT NULL,
   AnnoProduzione INTEGER,
   Nazionalita VARCHAR2(50),
   Regista VARCHAR2(50),
   Genere VARCHAR2(50),
   PRIMARY KEY (CodFilm));

CREATE TABLE RECITA(
    CodAttore INTEGER NOT NULL,
    CodFilm INTEGER NOT NULL,
    PRIMARY KEY(CodAttore,CodFilm),
    FOREIGN KEY(CodAttore) REFERENCES ATTORI(CodAttore),
    FOREIGN KEY(CodFilm) REFERENCES FILM(CodFilm));
    
CREATE TABLE SALE(
    CodSala INTEGER generated by default as identity(start with 1) not null,
    Posti INTEGER,
    Nome VARCHAR2(50),
    Citta VARCHAR2(50) NOT NULL,
    PRIMARY KEY(CodSala));

    
CREATE TABLE PROIEZIONI(
    CodProiezione INTEGER generated by default as identity(start with 1) not null,
    CodFilm INTEGER,
    CodSala INTEGER,
    Incasso NUMBER,
    DataProiezione DATE,
    PRIMARY KEY(CodProiezione),
    FOREIGN KEY(CodFilm) REFERENCES FILM(CodFilm),
    FOREIGN KEY(CodSala) REFERENCES SALE(CodSala));
    
INSERT INTO ATTORI (Nome, AnnoNascita, Nazionalita)
VALUES ('Leonardo DiCaprio', 1974, 'USA');

INSERT INTO ATTORI (Nome, AnnoNascita, Nazionalita)
VALUES ('Meryl Streep', 1949, 'USA');

INSERT INTO ATTORI (Nome, AnnoNascita, Nazionalita)
VALUES ('Tom Hanks', 1956, 'USA');

INSERT INTO ATTORI (Nome, AnnoNascita, Nazionalita)
VALUES ('Emma Stone', 1988, 'USA');

INSERT INTO ATTORI (Nome, AnnoNascita, Nazionalita)
VALUES ('Joaquin Phoenix', 1974, 'USA');

INSERT INTO ATTORI (Nome, AnnoNascita, Nazionalita)
VALUES ('Cate Blanchett', 1969, 'Australia');

INSERT INTO ATTORI (Nome, AnnoNascita, Nazionalita)
VALUES ('Denzel Washington', 1954, 'USA');

INSERT INTO ATTORI (Nome, AnnoNascita, Nazionalita)
VALUES ('Viola Davis', 1965, 'USA');

INSERT INTO ATTORI (Nome, AnnoNascita, Nazionalita)
VALUES ('Brad Pitt', 1963, 'USA');

INSERT INTO ATTORI (Nome, AnnoNascita, Nazionalita)
VALUES ('Kate Winslet', 1975, 'Regno Unito');

INSERT INTO FILM (Titolo, AnnoProduzione, Nazionalita, Regista, Genere)
VALUES ('Il Re Leone', 1994, 'USA', 'Roger Allers', 'Animazione');

INSERT INTO FILM (Titolo, AnnoProduzione, Nazionalita, Regista, Genere)
VALUES ('La La Land', 2016, 'USA', 'Damien Chazelle', 'Musical');

INSERT INTO FILM (Titolo, AnnoProduzione, Nazionalita, Regista, Genere)
VALUES ('Il Pianista', 2002, 'USA', 'Roman Polanski', 'Drammatico');

INSERT INTO FILM (Titolo, AnnoProduzione, Nazionalita, Regista, Genere)
VALUES ('Titanic', 1997, 'USA', 'James Cameron', 'Drammatico');

INSERT INTO FILM (Titolo, AnnoProduzione, Nazionalita, Regista, Genere)
VALUES ('The Departed - Il bene e il male', 2006, 'USA', 'Martin Scorsese', 'Drammatico');

INSERT INTO FILM (Titolo, AnnoProduzione, Nazionalita, Regista, Genere)
VALUES ('Black Swan', 2010, 'USA', 'Darren Aronofsky', 'Drammatico');

INSERT INTO FILM (Titolo, AnnoProduzione, Nazionalita, Regista, Genere)
VALUES ('The Aviator', 2004, 'USA', 'Martin Scorsese', 'Biografico');

INSERT INTO FILM (Titolo, AnnoProduzione, Nazionalita, Regista, Genere)
VALUES ('The Help', 2011, 'USA', 'Tate Taylor', 'Drammatico');

INSERT INTO FILM (Titolo, AnnoProduzione, Nazionalita, Regista, Genere)
VALUES ('Fight Club', 1999, 'USA', 'David Fincher', 'Drammatico');

INSERT INTO FILM (Titolo, AnnoProduzione, Nazionalita, Regista, Genere)
VALUES ('Il Curioso Caso di Benjamin Button', 2008, 'USA', 'David Fincher', 'Fantastico');

INSERT INTO RECITA (CodAttore, CodFilm)
VALUES (1, 4);
INSERT INTO RECITA (CodAttore, CodFilm)
VALUES (1, 5);
INSERT INTO RECITA (CodAttore, CodFilm)
VALUES (2, 2);
INSERT INTO RECITA (CodAttore, CodFilm)
VALUES (3, 7);
INSERT INTO RECITA (CodAttore, CodFilm)
VALUES (3, 8);
INSERT INTO RECITA (CodAttore, CodFilm)
VALUES (4, 2);
INSERT INTO RECITA (CodAttore, CodFilm)
VALUES (4, 10);
INSERT INTO RECITA (CodAttore, CodFilm)
VALUES (5, 3);
INSERT INTO RECITA (CodAttore, CodFilm)
VALUES (5, 6);
INSERT INTO RECITA (CodAttore, CodFilm)
VALUES (6, 7);
INSERT INTO RECITA (CodAttore, CodFilm)
VALUES (7, 7);
INSERT INTO RECITA (CodAttore, CodFilm)
VALUES (7, 6);
INSERT INTO RECITA (CodAttore, CodFilm)
VALUES (8, 9);
INSERT INTO RECITA (CodAttore, CodFilm)
VALUES (9, 9);
INSERT INTO RECITA (CodAttore, CodFilm)
VALUES (9, 10);
INSERT INTO RECITA (CodAttore, CodFilm)
VALUES (9, 1);
INSERT INTO RECITA (CodAttore, CodFilm)
VALUES (10, 4);
INSERT INTO RECITA (CodAttore, CodFilm)
VALUES (10, 3);

INSERT INTO SALE (Posti, Nome, Citta)
VALUES (100, 'Sala 1', 'Roma');

INSERT INTO SALE (Posti, Nome, Citta)
VALUES (120, 'Sala 2', 'Milano');

INSERT INTO SALE (Posti, Nome, Citta)
VALUES (80, 'Sala 3', 'Napoli');

INSERT INTO SALE (Posti, Nome, Citta)
VALUES (90, 'Sala 4', 'Firenze');

INSERT INTO SALE (Posti, Nome, Citta)
VALUES (110, 'Sala 5', 'Torino');


INSERT INTO PROIEZIONI (CodFilm, CodSala, Incasso, DataProiezione)
VALUES (1, 1, 1500.50, TO_DATE('2023/05/10', 'YYYY/MM/DD'));

INSERT INTO PROIEZIONI (CodFilm, CodSala, Incasso, DataProiezione)
VALUES (2, 1, 1200.00, TO_DATE('2023/05/11', 'YYYY/MM/DD'));

INSERT INTO PROIEZIONI (CodFilm, CodSala, Incasso, DataProiezione)
VALUES (3, 2, 1800.25, TO_DATE('2023/05/11', 'YYYY/MM/DD'));

INSERT INTO PROIEZIONI (CodFilm, CodSala, Incasso, DataProiezione)
VALUES (4, 2, 2000.75, TO_DATE('2023/05/12', 'YYYY/MM/DD'));

INSERT INTO PROIEZIONI (CodFilm, CodSala, Incasso, DataProiezione)
VALUES (5, 3, 950.00, TO_DATE('2023/05/12', 'YYYY/MM/DD'));

INSERT INTO PROIEZIONI (CodFilm, CodSala, Incasso, DataProiezione)
VALUES (6, 3, 1100.50, TO_DATE('2023/05/13', 'YYYY/MM/DD'));

INSERT INTO PROIEZIONI (CodFilm, CodSala, Incasso, DataProiezione)
VALUES (7, 4, 1700.00, TO_DATE('2023/05/14', 'YYYY/MM/DD'));

INSERT INTO PROIEZIONI (CodFilm, CodSala, Incasso, DataProiezione)
VALUES (8, 4, 1450.75, TO_DATE('2023/05/14', 'YYYY/MM/DD'));

INSERT INTO PROIEZIONI (CodFilm, CodSala, Incasso, DataProiezione)
VALUES (9, 5, 900.25, TO_DATE('2023/05/15', 'YYYY/MM/DD'));

INSERT INTO PROIEZIONI (CodFilm, CodSala, Incasso, DataProiezione)
VALUES (10, 5, 1200.00, TO_DATE('2023/05/15', 'YYYY/MM/DD'));